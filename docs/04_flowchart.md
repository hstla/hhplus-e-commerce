# 주요 기능 플로우 차트
## 목차
- [요구사항 분석](01_Requirements_Analysis.md)
- [ERD](03_erd.md)
- [핵심 로직 다이어그램](02_Sequence_Diagram.md)
- [플로우 차트](04_flowchart.md)
- [아키텍처 및 패키지 구조](05_Architecture.md)
- [↩️ README로 돌아가기](../README.md#주요기능-및-아키텍처-링크들)

## 주문 생성
```mermaid
flowchart TD
    A[사용자 주문 요청] --> B{상품 재고가 있는가?}
    B -->|없음| C[롤백 및 종료]
    B -->|있음| D[상품 재고 감소]

    D --> E{쿠폰이 있은가?}
    E --> |있음| F{쿠폰 유효성 검사}
    E -->|없음| J[할인 금액 0]
    J --> I
    F --> |검사 실패| H[종료 및 상품 재고 롤백]
    F --> |검사 성공| I[할인 금액 차감]
    I --> K[주문 생성]
    K --> N{사용자 포인트가 충분한가?}
    N --> |충분함| M[결제 완료]
    N --> |충분하지 않음| L[결제 실패 주문 상태 변경]
```

## 실시간 쿠폰 발급
```mermaid
flowchart TD
    A[사용자 쿠폰 발급 요청] --> B{3분 이내 요청한 적이 있나?}
    B -- 아니오 --> C[발급 실패 - 요청 시간 초과]
    B -- 예 --> D{유효한 쿠폰인가?}
    D -- 아니오 --> E[발급 실패 - 유효하지 않은 쿠폰]
    D -- 예 --> F{사용자가 이미 가지고 있나?}
    F -- 예 --> G[발급 실패 - 중복 발급]
    F -- 아니오 --> H{쿠폰 재고가 남아 있나?}
    H -- 아니오 --> I[발급 실패 - 재고 소진]
    H -- 예 --> J[쿠폰 재고 1 감소]
    J --> K[UserCoupon 생성]
    K --> L[사용자에게 쿠폰 생성 응답]
```